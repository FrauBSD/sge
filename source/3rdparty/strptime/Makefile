
#
# The 3rdparty/strptime directory contains a derivative of
# the BSD strptime() function which is not available on
# certain architectures such as the NEC SX-6.
#

DEPEND = ../3rdparty/sge_depend/$(COMPILE_ARCH)/sge_depend -l -S -Y $(DEPEND_FLAGS)

STRPTIME_DIR = ../3rdparty/strptime

STRPTIME = libstrptime.a

STRPTIME_SRC = strptime.c

STRPTIME_OBJS = $(STRPTIME_SRC:.c=.o)

###############################################################################
# global rules: all, clean, depend, messages
###############################################################################
all: $(STRPTIME)

strptime_clean:
	$(RM) $(STRPTIME_OBJS) libstrptime.a

depend:
	$(DEPEND) -f$(STRPTIME_DIR)/strptime_dependencies $(STRPTIME_DIR)/*.c

###############################################################################
# rules to build library
###############################################################################
libstrptime.a:       $(STRPTIME_OBJS)
	$(AR) $(ARFLAGS) libstrptime.a $(STRPTIME_OBJS)
	$(RANLIB) libstrptime.a

###############################################################################
# include dependencies for object files generated by sge_depend
###############################################################################
include $(STRPTIME_DIR)/strptime_dependencies

###############################################################################
# rules to build object codes
###############################################################################

strptime.o:	$(STRPTIME_DIR)/strptime.c
	$(CC) $(CFLAGS) $(SHARED_CFLAGS) -c $(STRPTIME_DIR)/strptime.c

