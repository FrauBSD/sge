
#
# The 3rdparty/fnmatch directory contains a derivative of
# the BSD fnmatch library function which is not available on
# certain architectures such as the NEC SX-6.
#

DEPEND = ../3rdparty/sge_depend/$(COMPILE_ARCH)/sge_depend -l -S -Y $(DEPEND_FLAGS)

FNMATCH_DIR = ../3rdparty/fnmatch

FNMATCH = libfnmatch.a

FNMATCH_SRC = fnmatch.c

FNMATCH_OBJS = $(FNMATCH_SRC:.c=.o)

###############################################################################
# global rules: all, clean, depend, messages
###############################################################################
all: $(FNMATCH)

fnmatch_clean:
	$(RM) $(FNMATCH_OBJS) libfnmatch.a

depend:
	$(DEPEND) -f$(FNMATCH_DIR)/fnmatch_dependencies $(FNMATCH_DIR)/*.c

###############################################################################
# rules to build library
###############################################################################
libfnmatch.a:       $(FNMATCH_OBJS)
	$(AR) $(ARFLAGS) libfnmatch.a $(FNMATCH_OBJS)
	$(RANLIB) libfnmatch.a

###############################################################################
# include dependencies for object files generated by sge_depend
###############################################################################
include $(FNMATCH_DIR)/fnmatch_dependencies

###############################################################################
# rules to build object codes
###############################################################################
fnmatch.o:	$(FNMATCH_DIR)/fnmatch.c
	$(CC) $(CFLAGS) $(SHARED_CFLAGS) -c $(FNMATCH_DIR)/fnmatch.c

